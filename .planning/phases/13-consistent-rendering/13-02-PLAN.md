---
phase: 13-consistent-rendering
plan: 02
type: execute
wave: 2
depends_on: ["13-01"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Two questions using the same template display options in identical order for participants"
    - "Same color appears on the same option position across template-linked questions"
    - "Non-template question renders normally with question.options order"
    - "Template-linked question in batch mode looks identical to live mode"
  artifacts: []
  key_links: []
---

<objective>
Verify consistent rendering works correctly in both live and batch voting modes with real template-linked questions.

Purpose: Human verification that REND-01, REND-02, REND-03 are met in actual usage — not just in tests.

Output: Verified rendering or bug reports for gap closure.
</objective>

<execution_context>
@C:\Users\cramo\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cramo\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/13-consistent-rendering/13-CONTEXT.md
@.planning/phases/13-consistent-rendering/13-01-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
  Template-aware participant rendering: VoteMultipleChoice now derives display order from template.options when a question has template_id, falls back to question.options for non-template questions. Same position-based color mapping across all MC questions. Templates loaded in participant session via fetchTemplates.
  </what-built>
  <how-to-verify>
  **Setup (in admin view):**
  1. Start the dev server: `npm run dev`
  2. Open admin at http://localhost:5173/admin
  3. Create or open a session
  4. Create a response template (e.g., "Likert 5" with options: Strongly Agree, Agree, Neutral, Disagree, Strongly Disagree)
  5. Create 2 multiple choice questions using the same template
  6. Create 1 multiple choice question WITHOUT a template (custom options)

  **Test REND-01 — Identical order (Live mode):**
  7. Open participant view (scan QR or use join link)
  8. Activate question 1 (template-linked) — note the option order
  9. Activate question 2 (template-linked) — verify options appear in the SAME order as question 1
  10. Activate question 3 (non-template) — verify options appear in admin-entered order

  **Test REND-02 — Consistent colors:**
  11. Go back to question 1 — note the color of each option position (e.g., position 1 = indigo, position 2 = pink)
  12. Switch to question 2 — verify the SAME colors appear in the SAME positions
  13. Check question 3 — verify colors still use the same palette (position-based, not text-based)

  **Test REND-03 — Consistent layout:**
  14. With the 5-option template questions, verify compact layout is used (smaller padding/text)
  15. Create a 3-option template question — verify standard (non-compact) layout
  16. Both template questions with same template should have identical button sizing

  **Test batch mode:**
  17. Create a batch with 2+ template-linked questions and 1 non-template question
  18. Activate the batch
  19. In participant view, navigate through batch questions
  20. Verify template-linked questions show same order/colors/layout as they did in live mode
  21. Verify non-template question renders with its own options

  **Test edge case — deleted template:**
  22. Create a question linked to a template
  23. Delete the template from the template panel
  24. Activate the question — verify it still renders using its own question.options (graceful fallback, no crash)

  **Expected behavior:**
  - Template-linked questions: options in template order, consistent colors per position
  - Non-template questions: options in admin-entered order, same color palette
  - Participant cannot tell which questions use templates
  - No visual glitches, no missing options, no crashes
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Human confirms:
- REND-01: Same template = same option order across questions
- REND-02: Same position = same color across template-linked questions
- REND-03: Same template = same button layout/sizing
- Batch and live modes render identically
- Deleted template degrades gracefully
</verification>

<success_criteria>
Human verification: "approved" — all REND requirements confirmed working in live and batch modes.
</success_criteria>

<output>
After completion, create `.planning/phases/13-consistent-rendering/13-02-SUMMARY.md`
</output>
