---
phase: 01-integration-spike
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - tsconfig.app.json
  - tsconfig.node.json
  - vite.config.ts
  - vercel.json
  - index.html
  - src/main.tsx
  - src/App.tsx
  - src/App.css
  - src/index.css
  - src/vite-env.d.ts
  - src/lib/supabase.ts
  - .env.local
  - .env.example
  - .gitignore
autonomous: false

must_haves:
  truths:
    - "npm run dev starts a Vite dev server that renders a React page"
    - "Tailwind CSS utility classes apply visible styling"
    - "Supabase client module is configured and importable"
    - "Environment variable template exists for Supabase credentials"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies"
      contains: "@supabase/supabase-js"
    - path: "vite.config.ts"
      provides: "Vite build configuration with Tailwind plugin"
      contains: "@tailwindcss/vite"
    - path: "src/lib/supabase.ts"
      provides: "Supabase client singleton"
      exports: ["supabase"]
    - path: "vercel.json"
      provides: "SPA rewrite rule for Vercel deployment"
      contains: "rewrites"
    - path: ".env.example"
      provides: "Environment variable template"
      contains: "VITE_SUPABASE_URL"
  key_links:
    - from: "src/lib/supabase.ts"
      to: "environment variables"
      via: "import.meta.env.VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY"
      pattern: "import\\.meta\\.env\\.VITE_SUPABASE"
    - from: "src/index.css"
      to: "Tailwind CSS"
      via: "@import tailwindcss"
      pattern: "@import.*tailwindcss"
---

<objective>
Scaffold the Vite + React + TypeScript project with Tailwind CSS, install Supabase client library, create the Supabase client helper module, and prepare the project for deployment to Vercel.

Purpose: Establish the complete project foundation so that Plan 02 can build the integration proof-of-concept on top of a working scaffold.
Output: A runnable Vite+React project with Tailwind styling, Supabase client configured, and Vercel deployment config ready.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-integration-spike/01-CONTEXT.md
@.planning/research/STACK.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Vite+React+TS project with Tailwind and Supabase client</name>
  <files>
    package.json
    tsconfig.json
    tsconfig.app.json
    tsconfig.node.json
    vite.config.ts
    vercel.json
    index.html
    src/main.tsx
    src/App.tsx
    src/App.css
    src/index.css
    src/vite-env.d.ts
    src/lib/supabase.ts
    .env.local
    .env.example
    .gitignore
  </files>
  <action>
    1. Scaffold a new Vite + React + TypeScript project in the repo root:
       - Run: `npm create vite@latest . -- --template react-ts`
       - This scaffolds into the current directory (repo already exists with .planning/)

    2. Install production dependencies:
       - Run: `npm install @supabase/supabase-js tailwindcss @tailwindcss/vite`
       - Do NOT install react-router, zustand, recharts, motion, etc. yet -- those are for later phases.
       - Only install what Phase 1 needs.

    3. Configure Tailwind CSS v4 with Vite plugin:
       - In `vite.config.ts`, import `@tailwindcss/vite` and add it to the plugins array alongside the React plugin.
       - In `src/index.css`, replace existing content with `@import "tailwindcss";` as the first line.
         Tailwind v4 uses CSS-first config -- no `tailwind.config.js` file needed.
       - Delete `src/App.css` contents (or remove the file) -- all styling via Tailwind utility classes.

    4. Create Supabase client helper at `src/lib/supabase.ts`:
       ```typescript
       import { createClient } from '@supabase/supabase-js';

       const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;
       const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;

       if (!supabaseUrl || !supabaseAnonKey) {
         throw new Error(
           'Missing Supabase environment variables. Copy .env.example to .env.local and fill in your values.'
         );
       }

       export const supabase = createClient(supabaseUrl, supabaseAnonKey);
       ```

    5. Create environment variable files:
       - `.env.example` with placeholder values:
         ```
         VITE_SUPABASE_URL=https://your-project.supabase.co
         VITE_SUPABASE_ANON_KEY=your-anon-key-here
         ```
       - `.env.local` with the same placeholder values (user will fill in real values).
       - Ensure `.env.local` is in `.gitignore` (Vite's template should already include this, but verify).

    6. Create `vercel.json` in project root for SPA routing:
       ```json
       {
         "rewrites": [
           { "source": "/(.*)", "destination": "/index.html" }
         ]
       }
       ```

    7. Update `src/App.tsx` to a minimal landing page that confirms the stack works:
       - Show "QuickVote" as an h1 with Tailwind classes (e.g., `text-4xl font-bold text-center mt-20`)
       - Show a subtitle: "Integration Spike" in smaller text
       - Use a few Tailwind utilities to prove styling works (background color, padding, flex layout)
       - Do NOT import or use Supabase yet -- that is Plan 02's job

    8. Ensure `.gitignore` includes: `node_modules`, `.env.local`, `dist`, `.vercel`

    9. Run `npm run dev` to verify the project starts without errors.
       Run `npm run build` to verify production build succeeds.
  </action>
  <verify>
    - `npm run dev` starts without errors and shows the QuickVote landing page at localhost
    - `npm run build` completes without TypeScript or build errors
    - Tailwind classes render visually (the h1 is large and bold)
    - `src/lib/supabase.ts` exists and exports `supabase`
    - `.env.example` exists with VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY placeholders
    - `vercel.json` exists with SPA rewrite rule
  </verify>
  <done>
    Vite+React+TS project runs locally with Tailwind CSS styling visible, Supabase client module ready (but not yet connected), and Vercel deployment config in place.
  </done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: Create Supabase project and configure environment</name>
  <action>
    Claude cannot create a Supabase project or retrieve API keys -- these require dashboard access with the user's account.
  </action>
  <what-built>
    Project scaffold is complete with a Supabase client helper that reads from environment variables. The `.env.example` file shows which variables are needed.
  </what-built>
  <instructions>
    1. Go to https://supabase.com/dashboard and create a new project:
       - Name: "quickvote" (or your preference)
       - Region: US East (us-east-1) -- closest to Vercel edge
       - Generate a database password (save it somewhere safe)
       - Wait for the project to finish provisioning

    2. Get your API credentials:
       - Go to Project Settings > API
       - Copy the "Project URL" (looks like https://abcdefgh.supabase.co)
       - Copy the "anon public" key (the long JWT string)

    3. Create a test table for the integration proof:
       - Go to the SQL Editor in your Supabase dashboard
       - Run this SQL:
         ```sql
         CREATE TABLE test_messages (
           id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
           content TEXT NOT NULL,
           created_at TIMESTAMPTZ DEFAULT now()
         );

         -- Enable Realtime for this table (required for Postgres Changes)
         ALTER PUBLICATION supabase_realtime ADD TABLE test_messages;

         -- Permissive RLS for the spike (open access)
         ALTER TABLE test_messages ENABLE ROW LEVEL SECURITY;
         CREATE POLICY "Allow all operations on test_messages"
           ON test_messages FOR ALL
           USING (true)
           WITH CHECK (true);
         ```

    4. Update `.env.local` in the project root:
       - Set VITE_SUPABASE_URL to your Project URL
       - Set VITE_SUPABASE_ANON_KEY to your anon public key
  </instructions>
  <resume-signal>Type "done" when Supabase project is created, test table exists, and .env.local has real values.</resume-signal>
</task>

</tasks>

<verification>
- `npm run dev` renders the QuickVote landing page with styled Tailwind text
- `npm run build` succeeds with zero errors
- `src/lib/supabase.ts` exists and will connect once env vars are real
- `.env.local` has real Supabase credentials (after checkpoint)
- `vercel.json` has SPA rewrite rule
</verification>

<success_criteria>
The project scaffold is complete: Vite+React+TS runs locally with Tailwind CSS, the Supabase client helper is configured, Vercel deployment config is ready, and the user's Supabase project has a test_messages table with Realtime enabled.
</success_criteria>

<output>
After completion, create `.planning/phases/01-integration-spike/01-01-SUMMARY.md`
</output>
